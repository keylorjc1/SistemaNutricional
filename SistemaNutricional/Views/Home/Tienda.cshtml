<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Tienda Online</title>
</head>
<body>
    <div class="container mt-4">
        <h2>Tienda Online</h2>
        <div class="row">
            <div class="col-md-6">
                <h3>Productos Disponibles</h3>
                <ul id="productosList" class="list-group">
                </ul>
            </div>
            <div class="col-md-6">
                <h3>Detalles del Producto</h3>
                <form id="compraForm">
                    <div class="form-group">
                        <label for="nombreProducto">Nombre:</label>
                        <input type="text" class="form-control" id="nombreProducto" readonly>
                    </div>
                    <div class="form-group">
                        <label for="descripcionProducto">Descripción:</label>
                        <textarea class="form-control" id="descripcionProducto" rows="3" readonly></textarea>
                    </div>
                    <div class="form-group">
                        <label for="precioProducto">Precio:</label>
                        <input type="text" class="form-control" id="precioProducto" readonly>
                    </div>
                    <div class="form-group">
                        <label for="cantidadProducto">Cantidad:</label>
                        <input type="number" class="form-control" id="cantidadProducto" readonly>
                    </div>
                    <div class="form-group">
                        <label for="metodoPago">Método de Pago:</label>
                        <select class="form-control" id="metodoPago" required>
                            <option value="tarjeta">Tarjeta</option>
                            <option value="tarjeta">Sinpe</option>
                            <option value="efectivo">Efectivo</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="comprarProducto()">Comprar Producto</button>
                </form>
            </div>
        </div>
        <div class="mt-4">
            <h3>Contactar Nutricionista</h3>
            <p>Para coordinar el pago y la entrega, por favor contacta al nutricionista.</p>
            <button type="button" class="btn btn-success" onclick="contactarNutricionista()">Whatsapp</button>
        </div>
        <div class="mt-4">
            <h3>Productos Reservados</h3>
            <ul id="productosReservadosList" class="list-group">
            </ul>
            <button type="button" class="btn btn-info mt-3" onclick="verProductosReservados()">Ver Productos Reservados</button>
            <button type="button" class="btn btn-danger mt-3" onclick="eliminarProductoReservado()">Eliminar Producto</button>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        var productosDisponibles = [
            { nombre: 'Producto 1', descripcion: 'Descripción del Producto 1', precio: 10.99, cantidad: 5 },
            { nombre: 'Producto 2', descripcion: 'Descripción del Producto 2', precio: 19.99, cantidad: 8 },
        ];
        var productosReservados = [];  
        function mostrarProductosDisponibles() {
            var listaProductos = document.getElementById('productosList');
            listaProductos.innerHTML = ''; 
            productosDisponibles.forEach(function (producto) {
                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.innerHTML = `<strong>${producto.nombre}</strong> - ${producto.descripcion} - Precio: $${producto.precio} - Cantidad: ${producto.cantidad}`;
                listItem.addEventListener('click', function() {
                    document.getElementById('nombreProducto').value = producto.nombre;
                    document.getElementById('descripcionProducto').value = producto.descripcion;
                    document.getElementById('precioProducto').value = `$${producto.precio}`;
                    document.getElementById('cantidadProducto').value = producto.cantidad;
                });
                listaProductos.appendChild(listItem);
            });
        }
        function comprarProducto() {
            var nombre = document.getElementById('nombreProducto').value;
            var descripcion = document.getElementById('descripcionProducto').value;
            var precio = document.getElementById('precioProducto').value;
            var cantidad = document.getElementById('cantidadProducto').value;
            var metodoPago = document.getElementById('metodoPago').value;
            productosReservados.push({ nombre, descripcion, precio, cantidad, metodoPago });
            mostrarProductosReservados();
            restarCantidadProducto(nombre, cantidad);
        }
        function restarCantidadProducto(nombre, cantidad) {
            var productoEnTienda = productosDisponibles.find(function (producto) {
                return producto.nombre === nombre;
            });

            if (productoEnTienda) {
                productoEnTienda.cantidad -= parseInt(cantidad);
                mostrarProductosDisponibles();
            }
        }
        function mostrarProductosReservados() {
            var listaProductosReservados = document.getElementById('productosReservadosList');
            listaProductosReservados.innerHTML = ''; 
            productosReservados.forEach(function (producto) {
                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.innerHTML = `<strong>${producto.nombre}</strong> - ${producto.descripcion} - Precio: ${producto.precio} - Método de Pago: ${producto.metodoPago}`;
                listaProductosReservados.appendChild(listItem);
            });
        }
        function verProductosReservados() {
            mostrarProductosReservados();
        }
        function eliminarProductoReservado() {
            var nombre = document.getElementById('nombreProducto').value;
            productosReservados = productosReservados.filter(function (producto) {
                return producto.nombre !== nombre;
            });
            mostrarProductosReservados();
        }
        function contactarNutricionista() {
            alert('Contactando al nutricionista para coordinar pago y entrega.');
        }
        mostrarProductosDisponibles();
    </script>
</body>
</html>
